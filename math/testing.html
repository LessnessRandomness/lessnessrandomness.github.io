<!DOCTYPE html>
<html lang="lv">
	<head>
		<meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
		<title>Test</title>
		<script src="algebra.js"></script>
		<script src="svg.min.js"></script>
		<script src="simplex_method.js"></script>
	</head>
	<body>
		<div id="test1"></div>
		<div id="test2"></div>
		<div id="test3"></div>
		<div id="test4"></div>
		<div id="test5"></div>
		<div id="test6"></div>
		<div id="test7"></div>
		<div id="test8"></div>
		<div id="test9"></div>
		<div id="test10"></div>
		<div id="test11"></div>
		<!-- <script> -->
			<!-- var draw = SVG().addTo('body').size(200, 200); -->
			<!-- var border = draw.rect(200, 200).attr({"stroke": "black", "stroke-width": "1", "fill": "white"}); -->
			<!-- var fobj = draw.foreignObject(100, 100).move(100, 100); -->
			<!-- var x = MathML.done(new MathML("mi", textNode("x"))); -->
			<!-- fobj.add(x); -->
		<!-- </script> -->
		<!-- <svg viewBox="0 0 100 30"> -->
			<!-- <text x="0" y="27" font-size="30" fill="#fa0" font-family="Open Sans">Test</text> -->
		<!-- </svg> -->
		<script>
			var test1 = document.getElementById("test1");
			var test2 = document.getElementById("test2");
			var test3 = document.getElementById("test3");
			var test4 = document.getElementById("test4");
			var test5 = document.getElementById("test5");
			var test6 = document.getElementById("test6");
			var test7 = document.getElementById("test7");			
			var test8 = document.getElementById("test8");
			var test9 = document.getElementById("test9");
			var test10 = document.getElementById("test10");
			var test11 = document.getElementById("test11");
			
			var linconstr_1 = new LinearConstraint(new LinearExpression([new Fraction(1), new Fraction(1)]), new Fraction(1), "ge");
			var linconstr_11 = new LinearConstraint(new LinearExpression([new Fraction(1), new Fraction(2)]), new Fraction(1), "ge");
			var linconstr_2 = new LinearConstraint(new LinearExpression([new Fraction(1), new Fraction(1)]), new Fraction(2), "le");		
			var linconstr_3 = new LinearConstraint(new LinearExpression([new Fraction(1), new Fraction(0)]), new Fraction(2));
			var linconstr_4 = new LinearConstraint(new LinearExpression([new Fraction(0), new Fraction(1)]), new Fraction(2));
			var linconstr_5 = new LinearConstraint(new LinearExpression([new Fraction(-2), new Fraction(1)]), new Fraction(2));
			var linobj = new LinearObjective(new LinearExpression([new Fraction(1), new Fraction(3)]));
			var problem = new LinearProgrammingProblem(linobj, [linconstr_1, linconstr_11, linconstr_2, linconstr_3, linconstr_4, linconstr_5]);
			
			problem.solution(test1);
			
			<!-- var T = problem.toSimplexTable(); -->
			<!-- var solution = T.solution(); -->

			<!-- for (var i = 0; i < solution["phaseI"]["rowsToSubstract"].length; i++) { -->
				<!-- T.table.substractMultipliedRow(T.table.rows-1, solution["phaseI"]["rowsToSubstract"][i]); -->
			<!-- } -->
			<!-- test11.appendChild(MathML.done(T.toMathML())); -->
			<!-- test11.appendChild(textNode(" ")); -->
			<!-- for (var i = 0; i < solution["phaseI"]["listOfPivots"].length; i++) { -->
				<!-- var row = solution["phaseI"]["listOfPivots"][i][0]; -->
				<!-- var col = solution["phaseI"]["listOfPivots"][i][1]; -->
				<!-- test11.appendChild(MathML.done(T.toMathML(row, col))); -->
				<!-- test11.appendChild(textNode(" ")); -->
				<!-- T.moveToNextIteration(row, col); -->
			<!-- } -->
			<!-- test11.appendChild(MathML.done(T.toMathML())); -->
			<!-- if (solution["phaseI"]["success"]) { -->
				<!-- test11.append(textNode(" /// ")); -->
				<!-- for (var i = 0; i < solution["phaseII"]["columnsToRemove"].length; i++) { -->
					<!-- test11.appendChild(textNode("removing column" + solution["phaseII"]["columnsToRemove"][i].toString())); -->
					<!-- T.table.removeColumn(solution["phaseII"]["columnsToRemove"][i]); -->
				<!-- } -->
				<!-- T.iteration = 0; -->
				<!-- test11.appendChild(MathML.done(T.toMathML())); -->
				<!-- test11.appendChild(textNode(" ")); -->
				<!-- test11.appendChild(textNode("Substracting objective from D row")) -->
				<!-- for (var i = 0; i < T.table.cols; i++) { -->
					<!-- if (i < T.objective.linexp.coeffs.length) { -->
						<!-- T.table.matrix[T.table.rows-1][i] = T.objective.linexp.coeffs[i].opposite(); -->
					<!-- } else { -->
						<!-- T.table.matrix[T.table.rows-1][i] = new Fraction(0); -->
					<!-- } -->
				<!-- } -->
				<!-- test11.appendChild(MathML.done(T.toMathML())); -->
				<!-- test11.appendChild(textNode(" ")); -->
				<!-- for (var i = 0; i < solution["phaseII"]["rowsToSubstract"].length; i++) { -->
					<!-- var r = solution["phaseII"]["rowsToSubstract"][i][0]; -->
					<!-- var k = solution["phaseII"]["rowsToSubstract"][i][1]; -->
					<!-- test11.appendChild(textNode("Substracting row " + r.toString() + " multiplied by " + JSON.stringify(k) + " from D row")); -->
					<!-- T.table.substractMultipliedRow(T.table.rows-1, r, k); -->
				<!-- } -->
				<!-- test11.appendChild(MathML.done(T.toMathML())); -->
				<!-- test11.appendChild(textNode(" ")); -->
				<!-- for (var i = 0; i < solution["phaseII"]["listOfPivots"].length; i++) { -->
					<!-- var row = solution["phaseII"]["listOfPivots"][i][0]; -->
					<!-- var col = solution["phaseII"]["listOfPivots"][i][1]; -->
					<!-- test11.appendChild(MathML.done(T.toMathML(row, col))); -->
					<!-- test11.appendChild(textNode(" ")); -->
					<!-- T.moveToNextIteration(row, col); -->
				<!-- } -->
				<!-- test11.appendChild(MathML.done(T.toMathML())); -->
				<!-- if (solution["phaseII"]["success"]) { -->
					<!-- alert("bounded"); -->
				<!-- } else { -->
					<!-- alert("unbounded"); -->
				<!-- } -->
			<!-- } -->
			
			<!-- p = problem.polytope; -->
			<!-- p.draw(test2, new Fraction(200)); -->
			
		</script>
	</body>
</html>