<!DOCTYPE html>
<html lang="lv">
	<head>
		<meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
		<title>Test</title>
		<script src="algebra.js"></script>
		<script src="svg.min.js"></script>
		<script src="simplex_method.js"></script>
	</head>
	<body>
		<p>Testing...</p>
		<p id="test1"></p>
		<p id="test2"></p>
		<p id="test3"></p>
		<p id="test4"></p>
		<p id="test5"></p>
		<p id="test6"></p>
		<p id="test7"></p>
		<script>
			var draw = SVG().addTo('body').size(200, 200);
			var border = draw.rect(200, 200).attr({"stroke": "black", "stroke-width": "1", "fill": "white"});
			var fobj = draw.foreignObject(100, 100).move(100, 100);
			var x = MathML.done(new MathML("mi", textNode("x")));
			fobj.add(x);
		</script>
		<script>
			var test1 = document.getElementById("test1");
			var test2 = document.getElementById("test2");
			var test3 = document.getElementById("test3");
			var test4 = document.getElementById("test4");
			var test5 = document.getElementById("test5");
			
			var linexp = new LinearExpression([new Fraction(1, 2), new Fraction(2, 3), new Fraction(-1, 7)]);
			var linobj = new LinearObjective(new LinearExpression([new Fraction(3, 3), new Fraction(-1, 7), new Fraction(1)], false));
			var linconstr_1 = new LinearConstraint(new LinearExpression([new Fraction(-1, 7), new Fraction(1), new Fraction(-123)]), new Fraction(13, 12));
			var linconstr_2 = new LinearConstraint(new LinearExpression([new Fraction(4, 5), new Fraction(0), new Fraction(4, 7)]), new Fraction(5, 4));
			var linconstr_3 = new LinearConstraint(new LinearExpression([new Fraction(-1), new Fraction(2), new Fraction(-3)]), new Fraction(1));
			var problem = new LinearProgrammingProblem(linobj, [linconstr_1, linconstr_2, linconstr_3], [1, 3], [2]);
			//test1.appendChild(MathML.done(MathML.row(linexp.toMathML())));
			//test2.appendChild(MathML.done(MathML.row(linobj.toMathML())));
			//test3.appendChild(MathML.done(MathML.row(linconstr_1.toMathML())));
			//test4.appendChild(MathML.done(problem.toMathML()));
			//test4.appendChild(MathML.done(problem.canonicalForm().toMathML()));
			
			var M = [];
			for (var i = 0; i < 10; i++) {
				M.push([]);
				for (var j = 0; j < 10; j++) {
					M[i].push(new MathML("mn", textNode((i+1)*(j+1))));
				}
			}
			table = MathML.table(M);
			test5.appendChild(MathML.done(MathML.row(MathML.brackets(table, "{", ""))));
			
			var m = [];
			for (var i = 0; i < 3; i++) {
				m.push([]);
				for (var j = 0; j < 4; j++) {
					m[i].push(new Fraction(i+1, i+j+1).reduce())
				}
			}
			var matrix = new Matrix(m);
			test6.appendChild(MathML.done(matrix.toMathML()));
			matrix.gaussEliminationPart1();
			test6.appendChild(MathML.done(matrix.toMathML()));
			matrix.gaussEliminationPart2();
			test6.appendChild(MathML.done(matrix.toMathML()));
			
			// var simplexTable = problem.toSimplexTable();
			// test4.appendChild(MathML.done(simplexTable.toMathML()));
			// var solution = simplexTable.solution();
			// if (solution["hasSolution"]) {
			//	test4.appendChild(MathML.done(solution["objectiveValue"].toMathML()));
			//} else {
			//	test4.appendChild(textNode("Objective function is unbounded"));
			//}
			
			linexp = new LinearExpression([new Fraction(1, 2), new Fraction(2, 3)]);
			linobj = new LinearObjective(new LinearExpression([new Fraction(3, 3), new Fraction(-1, 7)], false));
			linconstr_1 = new LinearConstraint(new LinearExpression([new Fraction(-1, 7), new Fraction(1)]), new Fraction(13, 12));
			linconstr_2 = new LinearConstraint(new LinearExpression([new Fraction(4, 5), new Fraction(0)]), new Fraction(5, 4));
			linconstr_3 = new LinearConstraint(new LinearExpression([new Fraction(-1), new Fraction(2)]), new Fraction(1));
			problem = new LinearProgrammingProblem(linobj, [linconstr_1, linconstr_2, linconstr_3], [1, 2]);
			test7.appendChild(MathML.done(problem.canonicalForm().toMathML()));
			var solution = problem.toSimplexTable().solution();
			if (solution["hasSolution"]) {
				test7.appendChild(MathML.done(solution["objectiveValue"].toMathML()));
				test7.appendChild(MathML.done(solution["plan"][0].toMathML()));
				test7.appendChild(MathML.done(solution["plan"][1].toMathML()));
			} else {
				test7.appendChild(textNode("Objective function is unbounded"));
			}
		</script>
	</body>
</html>